<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Minimal Demo &mdash; Python  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="S3 Configuration" href="s3conf.html" />
    <link rel="prev" title="Developer Manual" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Python
          </a>
              <div class="version">
                0.9.4
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#basics">Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#concepts">Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#configuration">Configuration</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#biodm-toolkit-guide">BioDM toolkit Guide</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Minimal Demo</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#naming-convention">Naming convention</a></li>
<li class="toctree-l4"><a class="reference internal" href="#base-resource">Base Resource</a></li>
<li class="toctree-l4"><a class="reference internal" href="#file-management">File management</a></li>
<li class="toctree-l4"><a class="reference internal" href="#versioning">Versioning</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="s3conf.html">S3 Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="permissions.html">Permissions</a></li>
<li class="toctree-l3"><a class="reference internal" href="versioning.html">Versioning</a></li>
<li class="toctree-l3"><a class="reference internal" href="table_schema.html">Tables and Schemas</a></li>
<li class="toctree-l3"><a class="reference internal" href="doc_endpoints.html">Documenting endpoints</a></li>
<li class="toctree-l3"><a class="reference internal" href="advanced_use.html">Advanced Use</a></li>
<li class="toctree-l3"><a class="reference internal" href="k8manifests.html">Kubernetes manifests</a></li>
<li class="toctree-l3"><a class="reference internal" href="production.html">Preparing for production</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../biodm/modules.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../licence.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Python</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Developer Manual</a></li>
      <li class="breadcrumb-item active">Minimal Demo</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/developer_manual/demo.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="minimal-demo">
<h1>Minimal Demo<a class="headerlink" href="#minimal-demo" title="Link to this heading"></a></h1>
<p>Say you or your organization needs to store <code class="docutils literal notranslate"><span class="pre">Datasets</span></code>, each containing a set of <code class="docutils literal notranslate"><span class="pre">File</span></code>
we will go over the following minimal example.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">demo.py</span><a class="headerlink" href="#id1" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">marshmallow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ma</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">marshmallow</span><span class="w"> </span><span class="kn">import</span> <span class="n">fields</span> <span class="k">as</span> <span class="n">mf</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sa</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">orm</span> <span class="k">as</span> <span class="n">sao</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">uvicorn</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">biodm</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">bd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">biodm</span><span class="w"> </span><span class="kn">import</span> <span class="n">config</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">biodm.components.controllers</span><span class="w"> </span><span class="kn">import</span> <span class="n">ResourceController</span><span class="p">,</span> <span class="n">S3Controller</span>


<span class="c1"># Tables</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Dataset</span><span class="p">(</span><span class="n">bd</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">Versioned</span><span class="p">,</span> <span class="n">bd</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">Base</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">autoincrement</span><span class="o">=</span><span class="ow">not</span> <span class="s1">&#39;sqlite&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">DATABASE_URL</span><span class="p">))</span>
    <span class="n">name</span>          <span class="p">:</span> <span class="n">sao</span><span class="o">.</span><span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>          <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">sa</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>                   <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">description</span>   <span class="p">:</span> <span class="n">sao</span><span class="o">.</span><span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>          <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">sa</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">500</span><span class="p">),</span>                  <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">username_owner</span><span class="p">:</span> <span class="n">sao</span><span class="o">.</span><span class="n">Mapped</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>          <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">sa</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;USER.username&quot;</span><span class="p">),</span>  <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">owner</span>         <span class="p">:</span> <span class="n">sao</span><span class="o">.</span><span class="n">Mapped</span><span class="p">[</span><span class="s2">&quot;User&quot;</span><span class="p">]</span>       <span class="o">=</span> <span class="n">sao</span><span class="o">.</span><span class="n">relationship</span><span class="p">(</span><span class="n">foreign_keys</span><span class="o">=</span><span class="p">[</span><span class="n">username_owner</span><span class="p">])</span>
    <span class="n">files</span>         <span class="p">:</span> <span class="n">sao</span><span class="o">.</span><span class="n">Mapped</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="s2">&quot;File&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">sao</span><span class="o">.</span><span class="n">relationship</span><span class="p">(</span><span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;dataset&quot;</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">File</span><span class="p">(</span><span class="n">bd</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">S3File</span><span class="p">,</span> <span class="n">bd</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">Base</span><span class="p">):</span>
    <span class="nb">id</span>                         <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">sa</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span>                    <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">dataset_id</span>                 <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">sa</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;DATASET.id&quot;</span><span class="p">),</span>   <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">dataset</span><span class="p">:</span> <span class="n">sao</span><span class="o">.</span><span class="n">Mapped</span><span class="p">[</span><span class="s2">&quot;Dataset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sao</span><span class="o">.</span><span class="n">relationship</span><span class="p">(</span><span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;files&quot;</span><span class="p">,</span> <span class="n">single_parent</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">foreign_keys</span><span class="o">=</span><span class="p">[</span><span class="n">dataset_id</span><span class="p">])</span>

<span class="c1"># Schemas</span>
<span class="k">class</span><span class="w"> </span><span class="nc">DatasetSchema</span><span class="p">(</span><span class="n">ma</span><span class="o">.</span><span class="n">Schema</span><span class="p">):</span>
    <span class="nb">id</span>             <span class="o">=</span> <span class="n">mf</span><span class="o">.</span><span class="n">Integer</span><span class="p">()</span>
    <span class="n">version</span>        <span class="o">=</span> <span class="n">mf</span><span class="o">.</span><span class="n">Integer</span><span class="p">()</span>
    <span class="n">name</span>           <span class="o">=</span> <span class="n">mf</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">description</span>    <span class="o">=</span> <span class="n">mf</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">username_owner</span> <span class="o">=</span> <span class="n">mf</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">load_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">owner</span>          <span class="o">=</span> <span class="n">mf</span><span class="o">.</span><span class="n">Nested</span><span class="p">(</span><span class="s2">&quot;UserSchema&quot;</span><span class="p">)</span>
    <span class="n">files</span>          <span class="o">=</span> <span class="n">mf</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">mf</span><span class="o">.</span><span class="n">Nested</span><span class="p">(</span><span class="s2">&quot;FileSchema&quot;</span><span class="p">))</span>

<span class="k">class</span><span class="w"> </span><span class="nc">FileSchema</span><span class="p">(</span><span class="n">ma</span><span class="o">.</span><span class="n">Schema</span><span class="p">):</span>
    <span class="nb">id</span>             <span class="o">=</span> <span class="n">mf</span><span class="o">.</span><span class="n">Integer</span><span class="p">()</span>
    <span class="n">filename</span>       <span class="o">=</span> <span class="n">mf</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">extension</span>      <span class="o">=</span> <span class="n">mf</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">size</span>           <span class="o">=</span> <span class="n">mf</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">url</span>            <span class="o">=</span> <span class="n">mf</span><span class="o">.</span><span class="n">String</span><span class="p">(</span>                 <span class="n">dump_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ready</span>          <span class="o">=</span> <span class="n">mf</span><span class="o">.</span><span class="n">Bool</span><span class="p">(</span>                   <span class="n">dump_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">dataset_id</span>     <span class="o">=</span> <span class="n">mf</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="n">load_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">dataset</span>        <span class="o">=</span> <span class="n">mf</span><span class="o">.</span><span class="n">Nested</span><span class="p">(</span><span class="s2">&quot;DatasetSchema&quot;</span><span class="p">)</span>

<span class="c1"># Controllers</span>
<span class="k">class</span><span class="w"> </span><span class="nc">DatasetController</span><span class="p">(</span><span class="n">ResourceController</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">app</span><span class="o">=</span><span class="n">app</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">FileController</span><span class="p">(</span><span class="n">S3Controller</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">app</span><span class="o">=</span><span class="n">app</span><span class="p">)</span>

<span class="c1"># Server</span>
<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">bd</span><span class="o">.</span><span class="n">Api</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">controllers</span><span class="o">=</span><span class="p">[</span><span class="n">DatasetController</span><span class="p">,</span> <span class="n">FileController</span><span class="p">],)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">uvicorn</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">:main&quot;</span><span class="p">,</span> <span class="n">factory</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">host</span><span class="o">=</span><span class="n">bd</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">SERVER_HOST</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">bd</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">SERVER_PORT</span><span class="p">,</span>
        <span class="n">loop</span><span class="o">=</span><span class="s2">&quot;uvloop&quot;</span><span class="p">,</span> <span class="n">log_level</span><span class="o">=</span><span class="s2">&quot;debug&quot;</span><span class="p">,</span> <span class="n">access_log</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<p>And voilà, If your use case is very basic it is a simple as that. This tiny codebase
deploys a server with two new RESTful resources, accessible respectively at <code class="docutils literal notranslate"><span class="pre">/files</span></code> and
<code class="docutils literal notranslate"><span class="pre">/datasets</span></code>.</p>
<p>Importantly <code class="docutils literal notranslate"><span class="pre">/schema</span></code>, <code class="docutils literal notranslate"><span class="pre">/files/schema</span></code>, <code class="docutils literal notranslate"><span class="pre">/datasets/schema</span></code> will let you, or an
<code class="docutils literal notranslate"><span class="pre">OpenAPISchema</span> <span class="pre">v3.0.0</span></code> compliant tool, discover all possible routes.</p>
<p>Moreover, it comes with two preset resources <code class="docutils literal notranslate"><span class="pre">/users</span></code>, <code class="docutils literal notranslate"><span class="pre">/groups</span></code> that are required for
permission management down the road.</p>
<p>All incoming Requests are logged in <code class="docutils literal notranslate"><span class="pre">History</span></code> table</p>
<p>Let’s examine some key points:</p>
<section id="naming-convention">
<h2>Naming convention<a class="headerlink" href="#naming-convention" title="Link to this heading"></a></h2>
<p>Sticking to the simple naming convention introduced above for the three required components to
add a new respource lets <code class="docutils literal notranslate"><span class="pre">BioDM</span></code> easily infer their relationships from name lookup in registries.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Table</span></code>: name of the resource in singular</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Schema</span></code>: same prefixed by Schema</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Controller</span></code>: same prefixed by controller</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is the Zen approach. You may however name those as you please and manually set relationships
in Controller’s <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method.</p>
</div>
</section>
<section id="base-resource">
<h2>Base Resource<a class="headerlink" href="#base-resource" title="Link to this heading"></a></h2>
<p>For a resource that is not interacting with an external serivce, this is covered by pairing
<code class="docutils literal notranslate"><span class="pre">BioDM</span></code>’s <code class="docutils literal notranslate"><span class="pre">SQLAlchemy</span></code> Declarative <code class="docutils literal notranslate"><span class="pre">Base</span></code> and <code class="docutils literal notranslate"><span class="pre">ResourceController</span></code> components.</p>
</section>
<section id="file-management">
<h2>File management<a class="headerlink" href="#file-management" title="Link to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>At the moment, s3 protocol, using pre-signed url, only.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">S3File</span></code> <cite>base class</cite> set on a table, populates it with a set of
<code class="docutils literal notranslate"><span class="pre">Column</span></code> fields essential for the task.
All but <code class="docutils literal notranslate"><span class="pre">ready</span></code> flag may be seen on <code class="docutils literal notranslate"><span class="pre">FileSchema</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">S3Controller</span></code> will then populate <code class="docutils literal notranslate"><span class="pre">upload_form</span></code> field when creating a new resource at <code class="docutils literal notranslate"><span class="pre">/files</span></code>.
This is a stringified form for direct upload on the storage bay.
Once the file is uploaded, readiness flag is set to true.
From that point on, urls to download the file can be obtained by visiting
<code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/files/{id}/download</span></code></p>
</section>
<section id="versioning">
<h2>Versioning<a class="headerlink" href="#versioning" title="Link to this heading"></a></h2>
<p>Dataset inheriting from <code class="docutils literal notranslate"><span class="pre">Versioned</span></code> will populate an extra
<code class="docutils literal notranslate"><span class="pre">version</span></code> column as primary key, making the overall key <code class="docutils literal notranslate"><span class="pre">('id',</span> <span class="pre">'version',)</span></code></p>
<p>Versioned resources are read-only, eventual updates have to pass by
<code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/datasets/{id}_{version}/release</span></code> route that will produce a new resource, incrementing version.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Nothing prevents you from expanding further on that primary key in your table class.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">SQLite</span></code> doesn’t support autoincrement in the case of a composite primary key.
<code class="docutils literal notranslate"><span class="pre">BioDM</span></code> will populate the canonical leading <code class="docutils literal notranslate"><span class="pre">id</span></code> column at the cost of an extra request
to fetch max id before inserting. Other configuration will yield errors.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Developer Manual" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="s3conf.html" class="btn btn-neutral float-right" title="S3 Configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>